<SET ci='ci + 1' cii='0'/>
<SET l="&lt;" r="&gt;" s="&nbsp;" t='s*4'></SET>
<!--  -->
<!--  -->
<INCLUDE HEADER SRC="macros/element-MACRO.html"/>
<INCLUDE HEADER SRC="macros/element-CALL.html"/>
<INCLUDE HEADER SRC="macros/element-INCLUDE.html"/>
<INCLUDE HEADER SRC="macros/element-SET.html"/>
<INCLUDE HEADER SRC="macros/element-IF.html"/>
<INCLUDE HEADER SRC="macros/element-ELIF.html"/>
<INCLUDE HEADER SRC="macros/element-ELSE.html"/>
<INCLUDE HEADER SRC="macros/element-FOR.html"/>
<INCLUDE HEADER SRC="macros/element-WHILE.html"/>
<INCLUDE HEADER SRC="macros/element-SET-TAG.html"/>
<INCLUDE HEADER SRC="macros/element-GET-TAG.html"/>
<INCLUDE HEADER SRC="macros/element-SET-ATTR.html"/>
<INCLUDE HEADER SRC="macros/element-GET-ATTR.html"/>
<INCLUDE HEADER SRC="macros/element-DEL-ATTR.html"/>
<INCLUDE HEADER SRC="macros/element-SHELL.html"/>
<INCLUDE HEADER SRC="macros/element-INFO.html"/>
<INCLUDE HEADER SRC="macros/element-WARN.html"/>
<INCLUDE HEADER SRC="macros/element-ERROR.html"/>
<INCLUDE HEADER SRC="macros/attr-IF.html"/>
<INCLUDE HEADER SRC="macros/attr-ELIF.html"/>
<INCLUDE HEADER SRC="macros/attr-ELSE.html"/>
<INCLUDE HEADER SRC="macros/attr-CALL.html"/>
<INCLUDE HEADER SRC="macros/attr-INCLUDE.html"/>
<!--  -->
<!--  -->
<style>
	#macros .macro {
		padding: 12px;
	}
	#macros .macro h4 {
		font-family: monospace;
		font-size: 1.4em;
		margin-right: 0.4em;
		display: inline;
	}
	#macros .macro p:first-of-type {
		display: inline;
	}
	#macros .macro x-line {
		display: block;
		height: 1px;
		margin-top: 6px;
		margin-bottom: 7px;
		background: rgba(0, 0, 0, 0.5);
	}
	
	#macros .macro .example table {
		margin-top: -1em;
	}
	
	#macros .macro .example {
		box-shadow: none;
		border: none;
	}
	
</style>
<!--  -->
<section id="macros" class="chapter">
	<h2><a href="#macros">{ci}. Macros</a></h2>
	
	<p>
		While most content from source files is coppied to the final document, <b>macros</b> can invoke special functionality for generating or excluding content.
		The user can also define custom macros, although with limited functionality.<br/>
	</p>
	
	<br/>
	<p>
		There are two sets of predefined macros:
		<ul>
			<li><a href="#element-macros">Element macros</a> &mdash; triggered by the element's tag.</li>
			<li><a href="#attribute-macros">Attribute macros</a> &mdash; triggered by an attribute's name of an element.</li>
		</ul>
	</p>
	
	
	<br/>
	<br/>
	<section id="element-macros">
		<SET cii='cii + 1'/>
		<h3><a href="#element-macros">{ci}.{cii}. Element macros</a></h3>
		
		<p>
			Macros that are invoked in-place of an HTML element are called <b>element macros</b>, and their tags are written in <b>uppercase</b>.
			Parameters for their functionality are passed through attributes, which are <i>usually</i> also in written uppercase.
		</p>
		
		<br/>
		<p>
			While they typically can have child elements of any kind, they are considered only by some macros.
			While some macros copy/evaluate their child elements, others remove them and some only affect the execution environment.
		</p>
		
		<br/>
		<div class="example">
			<h4><b>Example:</b> Macro demonstration for language-specific content.</h4>
			<table>
				<tr>
					<th>input</th>
					<th>output</th>
				</tr>
				<tr>
					<td class="code">
						{l}div{r}<br/>
							{t}{l}<a CALL="link-em-IF">IF</a> <span title="Check if variable lang is equal to string &quot;de&quot;">lang="de"</span>{r}<br/>
								{t*2}{l}p{r}Deutsch{l}/p{r}<br/>
							{t}{l}<a CALL="link-em-IF">/IF</a>{r}<br/>
							{t}{l}<a CALL="link-em-ELSE">ELSE</a>{r}<br/>
								{t*2}{l}p{r}English{l}/p{r}<br/>
							{t}{l}<a CALL="link-em-ELSE">/ELSE</a>{r}<br/>
						{l}/div{r}
					</td>
					<td class="code">
						{l}div{r}<br/>
						{t}{l}p{r}English{l}/p{r}<br/>
						{l}/div{r}
					</td>
				</tr>
			</table>
			<p>
				Here we decide what content to include in the final document, based on a variable containing the desired language of the document.
				The decision, which text to include, is done by the flow controll <code>{l}IF{r}</code> and <code>{l}ELSE{r}</code> macros,
				which depend on a variable <code>lang</code>.
				<br/>
				The variable was not defined within the source document, nor by the command-line options, therefore it is undefined. The resulting content is thus selected from the <code>{l}ELSE{r}</code> branch.
			</p>
		</div>
		
		<br/>
		<style>
			#element-macros > .list {
				column-width: 400px;
			}
		</style>
		<p>
			List of predefined element macros:
			<ul class="list">
				<li><a CALL="link-em-MACRO">{l}MACRO{r}</a> &mdash; Defines a new macro.</li>
				<li><a CALL="link-em-CALL">{l}CALL{r}</a>  &mdash; Invokes a <a CALL="link-em-MACRO">{l}MACRO{r}</a>.</li>
				<li><a CALL="link-em-INCLUDE">{l}INCLUDE{r}</a> &mdash; Includes content from another file.</li>
				<li><a CALL="link-em-SET">{l}SET{r}</a> &mdash; Assigns values to variables.</li>
				<li><a CALL="link-em-IF">{l}IF{r}</a> &mdash; Conditionally includes child elements.</li>
				<li><a CALL="link-em-ELIF">{l}ELIF{r}</a> &mdash; Conditionally includes child elements.</li>
				<li><a CALL="link-em-ELSE">{l}ELSE{r}</a> &mdash; Conditionally includes child elements.</li>
				<li><a CALL="link-em-FOR">{l}FOR{r}</a> &mdash; Includes child elements in a loop.</li>
				<li><a CALL="link-em-WHILE">{l}WHILE{r}</a> &mdash; Includes child elements in a loop.</li>
				<li><a CALL="link-em-SET-TAG">{l}SET-TAG{r}</a> &mdash; Sets tag of parent element.</li>
				<li><a CALL="a-GET-TAG">{l}GET-TAG{r}</a> &mdash; Sets a variable to parent element's tag.</li>
				<li><a CALL="link-em-SET-ATTR">{l}SET-ATTR{r}</a> &mdash; Sets parent element's attribute value.</li>
				<li><a CALL="link-em-GET-ATTR">{l}GET-ATTR{r}</a> &mdash; Sets variable to value of a parent's attribute.</li>
				<li><a CALL="link-em-DEL-ATTR">{l}DEL-ATTR{r}</a> &mdash; Removes attribute from parent element.</li>
				<li><a CALL="a-SHELL">{l}SHELL{r}</a> &mdash; Executes shell command.</li>
				<li><a CALL="link-em-INFO">{l}INFO{r}</a> &mdash; Logs messages to stderr.</li>
				<li><a CALL="link-em-WARN">{l}WARN{r}</a> &mdash; Logs warning messages to stderr.</li>
				<li><a CALL="link-em-ERROR">{l}ERROR{r}</a> &mdash; Logs error messages to stderr.</li>
			</ul>
		</p>
		
		<br/><br/>
		<INCLUDE SRC="macros/element-MACRO.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-CALL.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-INCLUDE.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-SET.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-IF.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-ELIF.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-ELSE.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-FOR.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-WHILE.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-SET-TAG.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-GET-TAG.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-SET-ATTR.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-GET-ATTR.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-DEL-ATTR.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-SHELL.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-INFO.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-WARN.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/element-ERROR.html"/>
	</section>
	
	<br/>
	<br/>
	<section id="attribute-macros">
		<SET cii='cii + 1'/>
		<h3><a href="#attribute-macros">{ci}.{cii}. Attribute macros</a></h3>
		
		<p>
			Macros that are invoked in-place of an element's attribute are called <b>attribute macros</b>, and their names are written in <b>uppercase</b>.
			They typically serve as short forms of <a href="element-macros">element macros</a>.
		</p>
	
		<br/>
		<div class="example">
			<h4><b>Example:</b> Macro attribute demonstration for language-specific text.</h4>
			<table>
				<tr>
					<th>input</th>
					<th>output</th>
				</tr>
				<tr>
					<td class="code">
						{l}div{r}<br/>
							{t}{l}p <a CALL="link-am-IF"><span title="Include this element only if expression &apos;lang==&quot;de&quot;&apos; evaluates to true">IF='lang=="de"'</span></a>{r}Deutsch{l}/p{r}<br/>
							{t}{l}p <a CALL="link-am-ELSE"><span title="Include this element only if the previous element's flow controll macro attribute evaluates to false">ELSE</span></a>{r}English{l}/p{r}<br/>
						{l}/div{r}
					</td>
					<td class="code">
						{l}div{r}<br/>
						{t}{l}p{r}English{l}/p{r}<br/>
						{l}/div{r}
					</td>
				</tr>
			</table>
			<p>
				Here we conditionally include the first <code>p</code> element,
				but only if the expression in the <code>IF</code> macro attribute evaluates to <code>true</code>.
				Otherwise, we include the second <code>p</code> element.
			</p>
		</div>
		
		<br/>
		<p>
			List of predefined attribute macros:
			<ul>
				<li><a CALL="link-am-IF">IF</a> &mdash; Conditionally include element.</li>
				<li><a CALL="link-am-ELIF">ELIF</a> &mdash; Conditionally inlude element.</li>
				<li><a CALL="link-am-ELSE">ELSE</a> &mdash; Conditionally inlude element.</li>
				<li><a CALL="link-am-CALL">CALL</a> &mdash; Invoke a user-defined macro <i>inside</i> the current element.</li>
				<li><a CALL="link-am-INCLUDE">INCLUDE</a> &mdash; Include contents of another file as child elements of the current element.</li>
			</ul>
		</p>
		
		<br/><br/>
		<INCLUDE SRC="macros/attr-IF.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/attr-ELIF.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/attr-ELSE.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/attr-CALL.html"/>
		<br/><br/>
		<INCLUDE SRC="macros/attr-INCLUDE.html"/>
	</section>
	
	
</section>
<!--  -->
<!--  -->
<!--  -->
<!--  -->
<MACRO NAME="common-IF">
	<code>IF='[expr]'</code>
	Ignore if expression <code>[expr]</code> evaluates to <code>false</code>.
</MACRO>
<MACRO NAME="common-IF-after">
	<code>IF='[expr]'</code>
	Ignore attributes <b>after</b> this attribute, if expression <code>[expr]</code> evaluates to <code>false</code>.
</MACRO>
<MACRO NAME="common-ELIF">
	<code>ELIF='[expr]'</code>
	Ignore if expression <code>[expr]</code> evaluates to <code>false</code>
	or a conditional on a previous element passed.
</MACRO>
<MACRO NAME="common-ELIF-after">
	<code>ELIF='[expr]'</code>
	Ignore attributes <b>after</b> this attribute, if expression <code>[expr]</code> evaluates to <code>false</code>
	or a conditional on a previous element passed.
</MACRO>
<MACRO NAME="common-ELSE">
	<code>ELSE</code>
	Ignore if a conditional on a previous element evaluated passed.
</MACRO>
<MACRO NAME="common-ELSE-after">
	<code>ELSE</code>
	Ignore attributes <b>after</b> this attribute, if a conditional on a previous element passed.
</MACRO>