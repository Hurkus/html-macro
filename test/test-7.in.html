<title>Test 7 -- Expression functions</title>

<!-- Regex match test -->
<SET price="123.50€" price_reg="(\d+)(\.\d+)?€"/>
<p IF='match(price, price_reg)'>{price}</p>
<p IF='!match(price, price_reg)'>0€</p>


<!-- Regex replace test -->
<SET s="id: 123"/>
<p>{replace(s + ';', '(\d+)', '#$1')}</p>


<!-- String transformation tests -->
<p title="Hello World!" CALL="low"></p>
<p title="Hello World!" CALL="up"></p>
<p title="Hello World!" CALL="clip"></p>

<MACRO NAME="low">
	<GET-ATTR a="title"/>
	<SET-ATTR title='lower(a)'/>
</MACRO>
<MACRO NAME="up">
	<GET-ATTR a="title"/>
	<SET-ATTR title='upper(a)'/>
</MACRO>
<MACRO NAME="clip">
	<GET-ATTR a="title"/>
	<SET-ATTR title='substr(a, 6, -2) + " " + substr(a, 0, 5) + "!"'/>
</MACRO>
